<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset={CHARSET}" />
<meta http-equiv="X-UA-Compatible" content="IE=7" />
<title>橙子家海外物流转运</title>
<link rel="stylesheet" type="text/css" href="{CSS_PATH}animate.min.css">
<link rel="stylesheet" type="text/css" href="{CSS_PATH}register.css">
<script src="{JS_PATH}jquery-3.2.1.min.js"></script>
<script src="{JS_PATH}jquery.validate.zh.min.js"></script>
<script src="{JS_PATH}jquery-ui.min.js"></script>
<script type="text/javascript" src="{JS_PATH}wow.min.js"></script>
<link rel="stylesheet" type="text/css" href="{CSS_PATH}alertTips.css">
<script type="text/javascript" src="{JS_PATH}alertTips.js"></script>
</head>
<style type="text/css">
  body { background-image:url('{IMG_PATH}/register.jpg'); background-size:cover; }
  .error { margin-left:10px; }
</style>
<body>

    <!-- /头部 -->

<!-- 注册表单 -->
<div id="content" style="margin-top: 40px;">
<div class="content_detail">
<p style="background-color: rgba(255,255,255,0.8); font-size: 16px;"><a style="text-decoration:none;" href="/">< 返回上页</a></p>
<form accept-charset="UTF-8" action="" id="aspnetForm" method="post" novalidate="novalidate">
	<input type="hidden" name="siteid" value="{$siteid}" />
	<input type="hidden" name="dosubmit" value="dosubmit" />
    <div class="common_panel">
    <div class="panel_header">用户注册<span>（已有账号？ <a href="/index.php?m=member&c=index&a=login">登录</a>）</span></div>
    <div class="panel_content">
      <table class="common_form">
        <tbody>
          <tr>
            <td class="label"><span style="color:red">(必填)</span>邮箱</td>
            <td class="item"><input class="textbox required email" id="email" name="email" type="text"></td>
            <td class="info"></td>
          </tr>
          <tr>
            <td class="label"><span style="color:red">(必填)</span>登录密码</td>
            <td class="item"><input class="textbox required" id="password" name="password" type="password"></td>
            <td class="info"></td>
          </tr>
          <tr>
            <td class="label"><span style="color:red">(必填)</span>确认密码</td>
            <td class="item"><input class="textbox required" id="password_confirmation" name="password_confirmation" type="password"></td>
            <td class="info"></td>
          </tr>
          <tr>
            <td class="label"><span style="color:red">(必填)</span>姓名</td>
            <td class="item"><input class="textbox required" id="cname" name="username" type="text"></td>
            <td class="info"></td>
          </tr>
          <tr>
            <td class="label"><span style="color:red">(必填)</span>英文名</td>
            <td class="item"><input class="textbox required" id="ename" name="enname" type="text"></td>
            <td class="info"></td>
          </tr>
          <tr>
            <td class="label"></td>
            <td colspan="2"> 注册后您的收货姓名为 英文名 + 中文名全拼，如Andy Liudehua；该收货姓名为用户身份重要识别标志，请慎重填写为保证货物安全，"姓名"请填写真实中文姓名</td>
          </tr>
          <tr>
            <td class="label">性别</td>
            <td class="item"><input id="gender__m" name="gender[]" type="radio" value="1">&nbsp;男&nbsp;&nbsp;&nbsp;<input id="gender__f" name="gender[]" type="radio" value="2">&nbsp;女&nbsp;&nbsp;&nbsp;<input checked="checked" id="gender__s" name="gender[]" type="radio" value="0">&nbsp;保密</td>
            <td class="info"></td>
          </tr>
          <tr>
            <td class="label"><span style="color:red">(必填)</span>手机</td>
            <td class="item"><input class="textbox required" id="mobile" name="mobile" type="text"></td>
            <td class="info"></td>
          </tr>
          <tr>
            <td class="label">邀请码</td>
            <td class="item"><input class="textbox" id="admin_code" name="admin_code" type="text"></td>
          </tr>
          <tr>
            <td class="label">验证码</td>
            <td class="item"><input class="textbox" id="code" name="code" type="text"><img id="check_code_l" style="vertical-align: middle;" src="/api.php?op=checkcode&code_len=5&font_size=14&width=120&height=26&font_color=&background=&0.05386923435944402" onclick="this.src='/api.php?op=checkcode&code_len=5&font_size=14&width=120&height=26&font_color=&background=&0.05386923435944402?d='+Math.random();" /></td>
          </tr>

          <tr>
            <td class="label"></td>
            <td colspan="2"><a href="javascript:void();" id="agreement_l" target="_blank">查看网站服务条款</a></td>
          </tr>
        </tbody>
      </table>
      <div class="agreement-accr">
          <div class="agreement-top">会员注册协议 <span>x</span></div>
          <iframe src="/index.php?m=member&c=index&a=register&protocol=1" frameborder="0" width="600" scrolling="Yes" height="420" leftmargin="0" topmargin="0"></iframe>
          <div class="agreement-bottom"><span>确定</span></div>
      </div>
    </div>
    <div class="panel_footer">
      <div class="submit_button"><a href="javascript:void(0);" id="register_button"> 同意服务条款，提交</a></div>
    </div>
  </div>
</form>
</div>
</div>
<!-- 注册表单 -->


<script>
        $(document).ready(function(){
            $(".con_ul li").mouseenter(function(){
                $(this).addClass("active").siblings().removeClass("active");
            }).mouseout(function() {
                $(".active-jq").addClass("active ").siblings().removeClass("active");
            });
            $(".con_ul li").click(function(){
                $(this).addClass("active-jq").siblings().removeClass("active-jq");
            });
        });

    </script>
    <script type="text/javascript">
  var theForm = document.forms['aspnetForm'];
  if (!theForm) {
      theForm = document.aspnetForm;
  }
  // function __doPostBack(eventTarget, eventArgument) {
  //     if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
  //         theForm.__EVENTTARGET.value = eventTarget;
  //         theForm.__EVENTARGUMENT.value = eventArgument;
  //         theForm.submit();
  //     }
  // }

  $(function(){
    jQuery.validator.addMethod("isMobile", function (value, element) {
      var length = value.length;
      var mobile = /^((1[0-9]{2})+\d{8})$/;
      return this.optional(element) || (length == 11 && mobile.test(value));
    }, "请正确填写您的手机号码");
    jQuery.validator.addMethod("isEnName", function (value, element) {
      return this.optional(element) || /^[a-z," "]+$/i.test(value);
    }, "请输入英文名称");
    jQuery.validator.addMethod("isCName", function (value, element) {
      return this.optional(element) || /^[\u4E00-\u9FA5]+$/.test(value);
    }, "请输入中文名称");

    jQuery.validator.addMethod("exitEmail", function (value, element) {
       var flag = 1;
        $.ajax({
          type:"GET",
          url:'/index.php?m=member&c=index&a=public_checkemail_ajax&',
          async:false,
          data:{'email':value},
          success: function(msg){
            if(msg != '1'){
              flag = 0;
            }
          }
        });
        if(flag == 0){
          return false;
        }else{
          return true;
        }
    }, "邮箱已存在");
    jQuery.validator.addMethod("exitName", function (value, element) {
       var flag = 1;
        $.ajax({
          type:"GET",
          url:'/index.php?m=member&c=index&a=public_checkname_ajax&',
          async:false,
          data:{'username':value},
          success: function(msg){
            if(msg != '1'){
              flag = 0;
            }
          }
        });
        if(flag == 0){
          return false;
        }else{
          return true;
        }
    }, "中文名已存在");
    jQuery.validator.addMethod("exitEnname", function (value, element) {
       var flag = 1;
        $.ajax({
          type:"GET",
          url:'/index.php?m=member&c=index&a=public_checkenname_ajax&',
          async:false,
          data:{'enname':value},
          success: function(msg){
            if(msg !='1'){
              flag = 0;
            }
          }
        });
        if(flag == 0){
          return false;
        }else{
          return true;
        }
    }, "英文名已存在");


    $("#aspnetForm").validate({
      rules: {
        "email": {
          required: true,
          email: true,
          exitEmail:true
        },
        "password": {
          required: true,
          minlength: 6
        },
        "password_confirmation": {
          required: true,
          minlength: 6,
          equalTo: "#password"
        },
        "enname": {
          required: true,
          isEnName: true,
          exitEnname:true
        },
        "username": {
          required: true,
          isCName: true,
          exitName:true
        },
        "mobile": {
          required: true,
          isMobile: true
        }
      }
    });
    $("#register_button").click(function () {
      if($("#aspnetForm").valid()){


        $(this).closest('form').submit();
      }
    });


      $(document).keyup(function(event){
        if(event.keyCode ==13){
          $("#register_button").trigger("click");
        }
      });
  })


    $(function(){
      //协议窗口展现/隐藏
      $("#agreement_l").on("click",function(){
        $(".agreement-accr").animate({top:'-9%'});
      });
      $(".agreement-top>span,.agreement-bottom>span").on("click",function(){
        $(".agreement-accr").animate({top:'-140%'});
      });

      //拖动
      $( ".agreement-accr" ).draggable();
    })
</script>